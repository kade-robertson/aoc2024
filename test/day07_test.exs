defmodule AOC2024Test.Day07 do
  use ExUnit.Case
  alias AOC2024.Day07
  require AOC2024.Day07

  test "parse_part_1" do
    assert Day07.parse_part_1("190: 10 19
3267: 81 40 27
83: 17 5
156: 15 6
7290: 6 8 6 15
161011: 16 10 13
192: 17 8 14
21037: 9 7 18 13
292: 11 6 16 20") === [
             {190, [10, 19]},
             {3267, [81, 40, 27]},
             {83, [17, 5]},
             {156, [15, 6]},
             {7290, [6, 8, 6, 15]},
             {161_011, [16, 10, 13]},
             {192, [17, 8, 14]},
             {21037, [9, 7, 18, 13]},
             {292, [11, 6, 16, 20]}
           ]
  end

  test "solve_part_1" do
    assert Day07.solve_part_1([
             {190, [10, 19]},
             {3267, [81, 40, 27]},
             {83, [17, 5]},
             {156, [15, 6]},
             {7290, [6, 8, 6, 15]},
             {161_011, [16, 10, 13]},
             {192, [17, 8, 14]},
             {21037, [9, 7, 18, 13]},
             {292, [11, 6, 16, 20]}
           ]) == 3749
  end

  test "solve_part_1 with my input" do
    input =
      Day07.input()
      |> Day07.parse_part_1()
      |> Day07.solve_part_1()

    assert input == 1_153_997_401_072
  end

  test "parse_part_2" do
    assert Day07.parse_part_2("190: 10 19
3267: 81 40 27
83: 17 5
156: 15 6
7290: 6 8 6 15
161011: 16 10 13
192: 17 8 14
21037: 9 7 18 13
292: 11 6 16 20") == [
             {190, [10, 19]},
             {3267, [81, 40, 27]},
             {83, [17, 5]},
             {156, [15, 6]},
             {7290, [6, 8, 6, 15]},
             {161_011, [16, 10, 13]},
             {192, [17, 8, 14]},
             {21037, [9, 7, 18, 13]},
             {292, [11, 6, 16, 20]}
           ]
  end

  test "solve_part_2" do
    assert Day07.solve_part_2([
             {190, [10, 19]},
             {3267, [81, 40, 27]},
             {83, [17, 5]},
             {156, [15, 6]},
             {7290, [6, 8, 6, 15]},
             {161_011, [16, 10, 13]},
             {192, [17, 8, 14]},
             {21037, [9, 7, 18, 13]},
             {292, [11, 6, 16, 20]}
           ]) == 11387
  end

  test "solve_part_2 with my input" do
    input =
      Day07.input()
      |> Day07.parse_part_2()
      |> Day07.solve_part_2()

    assert input == 97_902_809_384_118
  end
end
